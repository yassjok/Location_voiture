<!DOCTYPE html>
<html>
<head>
  <title>Login</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      background: url('https://images.unsplash.com/photo-1503376780353-7e6692767b70?auto=format&fit=crop&w=1350&q=80') no-repeat center center fixed;
      background-size: cover;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
    }

    .overlay {   /*Darked Background */
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      z-index :-1; /* To Appear behind It appears behind the .login-container ... */
    }

    .login-container {
      position: relative;
      z-index: 2;
      border: 2px solid black;
      border-radius: 10px;
      background: white;
      padding: 20px;
      width: 300px;
      text-align: center;
    }

    .login-container h2 {
      margin: 0 0 20px;
      font-size: 24px;
      font-weight: bold;
    }

    .login-container input[type="text"],
    .login-container input[type="password"] {
      width: 90%;
      padding: 10px;
      margin: 10px 0;
      border: 2px solid black;
      border-radius: 20px;
    }

    .login-container .checkbox-container {
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 10px 0;
    }

    .login-container input[type="checkbox"] {
      margin-right: 5px;
    }

    .login-container input[type="submit"] {
      background-color: #d32f2f;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 10px;
    }

    .login-container input[type="submit"]:hover {
      background-color: #b71c1c;
    }

    .signup-link {
      margin-top: 15px;
      font-size: 14px;
    }

    .signup-link a {
      color: #d32f2f;
      text-decoration: none;
    }

    .signup-link a:hover {
      text-decoration: underline;
    }

    .error-message {
      color: red;
      font-size: 14px;
      margin: 10px 0;
      display: block;
    }

    .user-list-btn {
      position: absolute;
      top: 20px;
      right: 20px;
      z-index: 2;
      background-color: #d32f2f;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 40px;
      cursor: pointer;
    }

    .user-list-btn:hover {
      background-color: #723636;
    }

    .user-table-container {
      position: absolute;
      top: 80px;
      right: 20px;
      z-index: 2;    /* To Let The Table appear in front the bg not behind it*/
      background: white;
      padding: 10px;
      border: 2px solid black;
      border-radius: 10px;
      display: none;
    }
    .user-table-container table {
      width: 100%;
    }
    .user-table-container th,
    .user-table-container td {
      padding: 8px;
      text-align: left;
      border: 1px solid black;
    }
  </style>
</head>
<body>
  <div class="overlay"> </div> <!-- Darked Background -->

  <button class="user-list-btn" onclick="toggleUserList()">User List</button>
  <div id="div1" class="user-table-container">
    <table id="table">
      <tr><th>Name</th><th>Password</th></tr>
    </table>
  </div>

  <div class="login-container">
    <h2>Login</h2>
    <form action="Home.html" onsubmit="return login()">
      <input type="text" id="in3" placeholder="Enter your name"><br>
      <input type="password" id="in4" placeholder="Enter a password"><br>
      <span id="s2" class="error-message"></span>

      <div class="checkbox-container">
        <input type="checkbox" onclick="showPass()"> Show password
      </div>

      <input type="submit" value="Login">
    </form>

    <div class="signup-link">
      Don't have an account? <a href="signup.html">Sign up</a>
    </div>
  </div>

    <script>
  //store all users
  let users = [];

  window.onload = function () {  // It checks if there are any users saved in localStorage
    let saved = localStorage.getItem('users');
    if (saved) { // If yes, it loads them into the users array
      users = JSON.parse(saved); //convert string to js array 
    }
  };


  function showPass() {
    let pass = document.getElementById('in4');
    // Ternair operator for type of password
    pass.type = (pass.type === 'password') ? 'text' : 'password';
  }

  // Function that handles login form validation
  function login() {
    let name = document.getElementById('in3').value; // Username input
    let pass = document.getElementById('in4').value; // Password input
    let error = document.getElementById('s2'); // Error message area

    // Check if username is empty
    if (name === '') {
      error.innerHTML = "username must be filled out";
      return false; // Prevent form submission
    }

    // Check if password is empty
    if (pass === '') {
      error.innerHTML = "password must be filled out";
      return false; // Prevent form submission
    }

    // Loop through the users array to check if login info matches
    for (let i = 0; i < users.length; i++) {
      if (users[i].username === name && users[i].password === pass) {
        return true; // Login successful, allow redirection to Home.html
      }
    }

    // If no matching user was found
    error.innerHTML = "password and username do not match";
    return false; // Stop form from submitting
  }

  // Function to display users in the HTML table
  function show() {
    let table = document.getElementById('table');

    // Clear previous rows, except the header row
    while (table.rows.length > 1) {
      table.deleteRow(1);
    }

    // Loop through all users and add them to the table
    for (let i = 0; i < users.length; i++) {
      let row = document.createElement('tr'); // New row
      let td1 = document.createElement('td'); // Username cell
      let td2 = document.createElement('td'); // Password cell

      td1.textContent = users[i].username;
      td2.textContent = users[i].password;

      row.append(td1);
      row.append(td2);
      table.append(row); // Add the row to the table
    }
  }

  // Function to toggle the visibility of the user list
  function toggleUserList() {
    let div = document.getElementById('div1');

    // If the table is showing, hide it
    if (div.style.display === 'block') {
      div.style.display = 'none';
    } else {
      // Otherwise, show it and update the user list
      div.style.display = 'block';
      show();
    }
  }
  </script> 
  </body>
  </html>